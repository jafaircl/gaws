!function(e,t){"use strict";function n(e){e||(e=a),Logger.log("gaws Error: "+e)}function r(e){return Object.prototype.toString.call(e).slice(8,-1)}function i(e){return"Array"===r(e)}var a="An error occured with the @gaws library",o=function(){function e(e){this.accessToken=e}return e.prototype.fetch=function(e,t){var n=t||{};return n.headers||(n.headers={}),n.headers.Authorization="Bearer "+this.accessToken,UrlFetchApp.fetch(e,n)},e._authenticate=function(e,t,n,r){var i={muteHttpExceptions:!0,method:"POST",payload:t};r&&(i.payload.scope=r),n&&(i.headers={Authorization:n});var a=UrlFetchApp.fetch(e,i),o=JSON.parse(a.getContentText());if(!o||!o.access_token)throw Error("No access token received: "+a.getContentText());return o.access_token},e.withRefreshToken=function(t,n,r,i,a){var o={grant_type:"refresh_token",client_id:n,client_secret:r,refresh_token:i};return new e(this._authenticate(t,o,null,a))},e.withClientCredentials=function(t,n,r,i){var a="Basic "+Utilities.base64Encode([n,r].join(":")),o={grant_type:"client_credentials",client_id:n,client_secret:r};return new e(this._authenticate(t,o,a,i))},e.withPassword=function(t,n,r,i,a){var o={grant_type:"password",client_id:n,username:r,password:i};return new e(this._authenticate(t,o,null,a))},e.withServiceAccount=function(t,n,r,i){var a=new Date,o={iss:n,scope:i,aud:t,exp:Math.round(a.getTime()/1e3+3600),iat:Math.round(a.getTime()/1e3)},c=Utilities.base64EncodeWebSafe('{"alg":"RS256","typ":"JWT"}')+"."+Utilities.base64EncodeWebSafe(JSON.stringify(o)),s=Utilities.computeRsaSha256Signature(c,r),u={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:c+="."+Utilities.base64Encode(s)};return new e(this._authenticate(t,u,null,null))},e}();e.getType=r,e.isArray=i,e.isObject=function(e){return"Object"===r(e)},e.isString=function(e){return"String"===r(e)},e.isDate=function(e){return"Date"===r(e)},e.isNumber=function(e){return"Number"===r(e)},e.isFunction=function(e){return"Function"===r(e)},e.isRegExp=function(e){return"RegExp"===r(e)},e.isBoolean=function(e){return"Boolean"===r(e)},e.isNull=function(e){return"Null"===r(e)},e.isUndefined=function(e){return"Undefined"===r(e)},e.isEmpty=function(e){return""===e},e.checkType=function(e,t,i){return t(e)?e:n("Expected "+t.name.slice(2)+" but received "+r(e)+" "+i)},e.arrayIsEmpty=function(e){return void 0===e||0==e.length},e.deDuplicate=function(e){var t={};return e.filter(function(e){var n=JSON.stringify(e);return!Boolean(t[n])&&(t[n]=!0)})},e.ERROR_MSG=a,e.logError=n,e.addLabel=function(e,t){AdWordsApp.labels().withCondition('Name = "'+e+'"').get().hasNext()||AdWordsApp.createLabel(e,"",t)},e.deleteLabel=function(e){for(var t=AdWordsApp.labels().withCondition('LabelName CONTAINS "'+e+'"').get();t.hasNext();)t.next().remove()},e.removeLabelFrom=function(e,n){var r=i(n)?n.join('","'):n;new t.Iterator({entity:e,conditions:['LabelNames CONTAINS_ANY ["'+r+'"]']}).iterate(function(){if(i(n))for(var e in n)this.removeLabel(n[e]);else this.removeLabel(n)})},e.OAuth2=o}(this.gaws=this.gaws||{},_gaws_core);
